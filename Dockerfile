# FROM node:14
FROM node:12

ARG REACT_APP_CHAIN_ID
ARG REACT_APP_MSG_VERSION
ARG REACT_APP_NODE_URL
ARG REACT_APP_EXPLORER_URL

ENV REACT_APP_CHAIN_ID=${REACT_APP_CHAIN_ID:-333}
ENV REACT_APP_MSG_VERSION=${REACT_APP_MSG_VERSION:-1}
ENV REACT_APP_NODE_URL=${REACT_APP_NODE_URL:-https://dev-api.zilliqa.com}
ENV REACT_APP_EXPLORER_URL=${REACT_APP_EXPLORER_URL:-https://viewblock.io/zilliqa}

COPY . /nucleus-wallet
WORKDIR /nucleus-wallet

RUN yarn install
RUN yarn ci
RUN REACT_APP_CHAIN_ID=${REACT_APP_CHAIN_ID} REACT_APP_MSG_VERSION=${REACT_APP_MSG_VERSION} REACT_APP_NODE_URL=${REACT_APP_NODE_URL} REACT_APP_EXPLORER_URL=${REACT_APP_EXPLORER_URL} yarn build
